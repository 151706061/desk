<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
VTK Mesh display
</title>
<script type="text/javascript" src="o3d-webgl/base.js"></script>
<script type="text/javascript" src="o3djs/base.js"></script>

<script type="text/javascript" src="o3djs/webgl.js"></script>
<script type="text/javascript" src="o3djs/util.js"></script>
<script type="text/javascript" src="o3djs/arcball.js"></script>
<script type="text/javascript" src="o3djs/cameracontroller.js"></script>
<script type="text/javascript" src="o3djs/camera.js"></script>
<script type="text/javascript" src="o3djs/canvas.js"></script>
<script type="text/javascript" src="o3djs/dump.js"></script>
<script type="text/javascript" src="o3djs/effect.js"></script>
<script type="text/javascript" src="o3djs/element.js"></script>
<script type="text/javascript" src="o3djs/error.js"></script>
<script type="text/javascript" src="o3djs/event.js"></script>
<script type="text/javascript" src="o3djs/fps.js"></script>
<script type="text/javascript" src="o3djs/gpu2d.js"></script>
<script type="text/javascript" src="o3djs/io.js"></script>
<script type="text/javascript" src="o3djs/primitives.js"></script>
<script type="text/javascript" src="o3djs/lineprimitives.js"></script>
<script type="text/javascript" src="o3djs/loader.js"></script>
<script type="text/javascript" src="o3djs/manipulators.js"></script>
<script type="text/javascript" src="o3djs/material.js"></script>
<script type="text/javascript" src="o3djs/math.js"></script>
<script type="text/javascript" src="o3djs/pack.js"></script>
<script type="text/javascript" src="o3djs/particles.js"></script>
<script type="text/javascript" src="o3djs/performance.js"></script>
<script type="text/javascript" src="o3djs/picking.js"></script>
<script type="text/javascript" src="o3djs/quaternions.js"></script>
<script type="text/javascript" src="o3djs/rendergraph.js"></script>
<script type="text/javascript" src="o3djs/scene.js"></script>
<script type="text/javascript" src="o3djs/serialization.js"></script>
<script type="text/javascript" src="o3djs/shape.js"></script>
<script type="text/javascript" src="o3djs/serialization.js"></script>
<script type="text/javascript" src="o3djs/simple.js"></script>
<script type="text/javascript" src="o3djs/test.js"></script>
<script type="text/javascript" src="o3djs/texture.js"></script>
<script type="text/javascript" src="o3djs/util.js"></script>
<script type="text/javascript" src="o3djs/webgl.js"></script>


<script type="text/javascript" src="o3d-webgl/object_base.js"></script>
<script type="text/javascript" src="o3d-webgl/named_object_base.js"></script>
<script type="text/javascript" src="o3d-webgl/named_object.js"></script>
<script type="text/javascript" src="o3d-webgl/param_object.js"></script>
<script type="text/javascript" src="o3d-webgl/param_array.js"></script>
<script type="text/javascript" src="o3d-webgl/param.js"></script>
<script type="text/javascript" src="o3d-webgl/event.js"></script>
<script type="text/javascript" src="o3d-webgl/raw_data.js"></script>
<script type="text/javascript" src="o3d-webgl/texture.js"></script>
<script type="text/javascript" src="o3d-webgl/bitmap.js"></script>
<script type="text/javascript" src="o3d-webgl/file_request.js"></script>
<script type="text/javascript" src="o3d-webgl/client.js"></script>
<script type="text/javascript" src="o3d-webgl/render_node.js"></script>
<script type="text/javascript" src="o3d-webgl/clear_buffer.js"></script>
<script type="text/javascript" src="o3d-webgl/state_set.js"></script>
<script type="text/javascript" src="o3d-webgl/viewport.js"></script>
<script type="text/javascript" src="o3d-webgl/tree_traversal.js"></script>
<script type="text/javascript" src="o3d-webgl/draw_list.js"></script>
<script type="text/javascript" src="o3d-webgl/draw_pass.js"></script>
<script type="text/javascript" src="o3d-webgl/render_surface_set.js"></script>
<script type="text/javascript" src="o3d-webgl/render_surface.js"></script>
<script type="text/javascript" src="o3d-webgl/state.js"></script>
<script type="text/javascript" src="o3d-webgl/draw_context.js"></script>
<script type="text/javascript" src="o3d-webgl/ray_intersection_info.js"></script>
<script type="text/javascript" src="o3d-webgl/sampler.js"></script>
<script type="text/javascript" src="o3d-webgl/transform.js"></script>
<script type="text/javascript" src="o3d-webgl/pack.js"></script>
<script type="text/javascript" src="o3d-webgl/bounding_box.js"></script>
<script type="text/javascript" src="o3d-webgl/draw_element.js"></script>
<script type="text/javascript" src="o3d-webgl/element.js"></script>
<script type="text/javascript" src="o3d-webgl/field.js"></script>
<script type="text/javascript" src="o3d-webgl/buffer.js"></script>
<script type="text/javascript" src="o3d-webgl/stream.js"></script>
<script type="text/javascript" src="o3d-webgl/vertex_source.js"></script>
<script type="text/javascript" src="o3d-webgl/stream_bank.js"></script>
<script type="text/javascript" src="o3d-webgl/primitive.js"></script>
<script type="text/javascript" src="o3d-webgl/shape.js"></script>
<script type="text/javascript" src="o3d-webgl/effect.js"></script>
<script type="text/javascript" src="o3d-webgl/material.js"></script>
<script type="text/javascript" src="o3d-webgl/archive_request.js"></script>
<script type="text/javascript" src="o3d-webgl/param_operation.js"></script>
<script type="text/javascript" src="o3d-webgl/function.js"></script>
<script type="text/javascript" src="o3d-webgl/counter.js"></script>
<script type="text/javascript" src="o3d-webgl/curve.js"></script>
<script type="text/javascript" src="o3d-webgl/skin.js"></script>
<script type="text/javascript" src="o3d-webgl/transform.js"></script>
<script type="text/javascript" src="o3d-webgl/transform.js"></script>
<script type="text/javascript" src="o3d-webgl/transform.js"></script>

<script type="text/javascript" src="O3Dvtk.js"></script>

<script type="text/javascript" id="myscript"> 

window.onload = init;
window.onunload = uninit;

// global variables

var g_scene;

function resizeClient() {
    g_scene.resize();
    g_scene.render();
    
    function workaround_render()
    {
    	g_scene.render();
    }
    var t=setTimeout(workaround_render,500);
}

/**
 * Creates the client area.
 */
function init() {
  o3djs.webgl.makeClients(initStep2);
}
/**
 * Initializes O3D, creates the object and sets up the transform and
 * render graphs.
 * @param {Array} clientElements Array of o3d object elements.
 */
function initStep2(clientElements) {

	g_scene=o3djs.renderscene.createRenderScene(clientElements[0]);
//	function setBoundingBox()
//	{
//		var primitives;
//		var primitives=g_pack.getObjectsByClassName('Primitive');
//		alert(primitives.length);
//	};
//	var t=setTimeout(setBoundingBox,5000);

   	g_scene.render();
	window.onresize = resizeClient;
	g_scene.addMeshes("http://www.creatis.insa-lyon.fr/~valette/meshView/coeurThorax/coeurthorax.xml");
//	g_scene.addMeshes("test/output_full.xml");
//	createFromFile(g_scene,"data/heart.vtk",[1,1,1,0.6]);
//	createFromFile(g_scene,"data/skull.vtk",[1,1,1,0.6]);
//	createFromFile(g_scene,"coeurThorax/poumonDroit.vtk",[1,1,1,1]);
}

/**
 * Removes any callbacks so they don't get called after the page has unloaded.
 */
function uninit() {
  if (g_scene.client) {
    g_scene.client.cleanup();
  }
}

</script>

</head>
<body>

<!-- Start of O3D plugin -->
<div id="o3d" style="width: 100%; height: 100%;"></div>
<!-- End of O3D plugin -->

</div>
</body>
</html>
